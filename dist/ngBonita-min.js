"use strict";angular.module("ngBonita",["ngResource","ngCookies"]),angular.module("ngBonita").config(["bonitaConfigProvider",function(a){a.setBonitaUrl("http://localhost:8080/bonita")}]),angular.module("ngBonita").factory("bonitaAuthentication",["$log","$http","$q","BonitaSession","bonitaConfig",function(a,b,c,d,e){var f={};return f.login=function(f,g){var h=c.defer();return b({method:"POST",url:e.getBonitaUrl()+"/loginservice",data:$.param({username:f,password:g,redirect:!1}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(){a.log("BonitaAuthentication.login success"),d.getCurrent().$promise.then(function(a){null===a?h.reject("No active session found"):(e.setUsername(a.user_name),e.setUserId(a.user_id),h.resolve(a))})}).error(function(b,c,d,f){a.log("BonitaAuthentication.login failure response "+c),a.log("Bonita URL: "+e.getBonitaUrl()),h.reject({data:b,status:c,headers:d,config:f})}),h.promise},f.logout=function(){var d=c.defer();return b({method:"GET",url:e.getBonitaUrl()+"/logoutservice",data:$.param({redirect:!1}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(){a.log("BonitaAuthentication.logout success"),e.setUsername(null),e.setUserId(null),d.resolve()}).error(function(b,c,e,f){a.log("BonitaAuthentication.logout failure response "+c),d.reject({data:b,status:c,headers:e,config:f})}),d.promise},f}]),angular.module("ngBonita").provider("bonitaConfig",function(){var a="http://localhost:8080/bonita";this.setBonitaUrl=function(b){a=b},this.$get=["$cookies",function(b){var c,d,e={};return b.bonitaUrl=a,e.getBonitaUrl=function(){return a},e.getUserId=function(){return c},e.setUserId=function(a){c=a,b.bonitaUserId=a},e.getUsername=function(){return d},e.setUsername=function(a){d=a,b.bonitaUsername=a},e}]}),angular.module("ngBonita").factory("bonitaUtils",["$http",function(a){var b={},c=function(a,b){var c=b()["content-range"],d=c.split("/"),e=d[0].split("-");return{items:angular.fromJson(a),pageIndex:Number(e[0]),pageSize:Number(e[1]),totalCount:Number(d[1])}};return b.transformPaginateresponse=function(){return[c].concat(a.defaults.transformResponse)},b}]),angular.module("ngBonita").factory("ArchivedHumanTask",["$resource","bonitaConfig","bonitaUtils",function(a,b,c){return a(b.getBonitaUrl()+"/API/bpm/archivedHumanTask/:id",{id:"@id",p:0,c:10,o:"reached_state_date ASC"},{getCompletedByCurrentUser:{method:"GET",params:{f:["assigned_id="+b.getUserId()]},transformResponse:c.transformPaginateresponse()}})}]),angular.module("ngBonita").factory("ArchivedProcessInstance",["$resource","bonitaConfig","bonitaUtils",function(a,b,c){return a(b.getBonitaUrl()+"/API/bpm/archivedCase/:id",{id:"@id",p:0,c:10},{getStartedByCurrentUser:{method:"GET",params:{f:["started_by="+b.getUserId()]},transformResponse:c.transformPaginateresponse()}})}]),angular.module("ngBonita").factory("BonitaSession",["$resource","bonitaConfig",function(a,b){return a(b.getBonitaUrl()+"/API/system/session/unused",{},{getCurrent:{method:"GET"}})}]),angular.module("ngBonita").factory("HumanTask",["$resource","bonitaConfig","bonitaUtils",function(a,b,c){return a(b.getBonitaUrl()+"/API/bpm/humanTask/:id",{id:"@id",p:0,c:10,o:"priority ASC"},{getFromCurrentUser:{method:"GET",params:{f:["state=ready","user_id="+b.getUserId()]},transformResponse:c.transformPaginateresponse()}})}]),angular.module("ngBonita").factory("ProcessDefinition",["$resource","bonitaConfig","bonitaUtils",function(a,b,c){return a(b.getBonitaUrl()+"/API/bpm/process/:id",{id:"@id",p:0,c:10,o:"displayName ASC"},{getStartableByCurrentUser:{method:"GET",params:{f:["user_id="+b.getUserId()]},transformResponse:c.transformPaginateresponse()}})}]),angular.module("ngBonita").factory("ProcessInstance",["$resource","bonitaConfig","bonitaUtils",function(a,b,c){return a(b.getBonitaUrl()+"/API/bpm/case/:id",{id:"@id",p:0,c:10},{getStartedByCurrentUser:{method:"GET",params:{f:["started_by="+b.getUserId()]},transformResponse:c.transformPaginateresponse()}})}]),angular.module("ngBonita").factory("User",["$resource","bonitaConfig",function(a,b){return a(b.getBonitaUrl()+"/API/identity/user/:id",{id:"@id"})}]);